<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mystic Galaxy</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>üåå Mystic Galaxy</h1>
    <nav>
      <a href="#articles">‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°</a>
      <a href="#gallery">‡∏†‡∏≤‡∏û/‡∏Ñ‡∏•‡∏¥‡∏õ</a>
      <a href="#chat">‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢</a>
      <a href="#fortune">‡∏î‡∏π‡∏î‡∏ß‡∏á</a>
    </nav>
  </header>

  <main>
    <section id="articles">
      <h2>‚ú® ‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
      <p>‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠ ‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏• ‡πÅ‡∏•‡∏∞‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ö‡∏ß‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
    </section>

    <section id="gallery">
      <h2>ü™ê ‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏Ñ‡∏•‡∏¥‡∏õ</h2>
      <p>‡πÉ‡∏™‡πà‡∏†‡∏≤‡∏û/‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡πÅ‡∏•‡πá‡∏Ñ‡∏ã‡∏µ‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ</p>
    </section>

    <section id="chat">
      <h2>üí¨ ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢</h2>
      <div id="chat-box"></div>
      <input type="text" id="chat-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°...">
      <button onclick="sendMessage()">‡∏™‡πà‡∏á</button>
    </section>

    <section id="fortune">
      <h2>üîÆ ‡∏î‡∏π‡∏î‡∏ß‡∏á‡∏°‡∏¥‡∏ô‡∏¥</h2>
      <button onclick="drawFortune()">‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢</button>
      <p id="fortune-result"></p>
    </section>
  </main>

  <footer>
    <p>¬© 2025 Mystic Galaxy</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
import React, { useMemo, useRef, useState, useEffect } from "react";
import { motion, AnimatePresence } from "framer-motion";
import { Tabs, TabsList, TabsTrigger, TabsContent } from "@/components/ui/tabs";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Switch } from "@/components/ui/switch";
import { Badge } from "@/components/ui/badge";
import { Separator } from "@/components/ui/separator";
import { Select, SelectTrigger, SelectContent, SelectItem, SelectValue } from "@/components/ui/select";
import { Upload, Send, MessageSquare, Paintbrush, Sparkles, Volume2, LinkIcon, Images, Stars, Rocket, Heart, Briefcase, Coins, MoveRight } from "lucide-react";

/*
  Mystic Galaxy ‚Äî Single-file React app
  Theme: Galaxy / Stars, Professional UI (Thai language)
  Features:
  - Articles with images or short clips
  - Community chat (text + image upload, client-side)
  - Mini-game: ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå (needs 5 taps before a stick drops)
  - Fortune categories: ‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô / ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å / ‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏†
  - 100 fortune slips (procedurally generated but unique & deterministic per session)
  - Sound & particle effects
  - AI ‡∏î‡∏π‡∏î‡∏ß‡∏á (rule-based local demo)
  - Affiliate area & Ad slots
  - Product (‡∏Ç‡∏≠‡∏á‡∏°‡∏á‡∏Ñ‡∏•) showcase with contact section

  Notes:
  - This is front-end only; replace mock handlers with your back-end as needed.
  - Uses Tailwind classes; ensure Tailwind & shadcn/ui are available in your environment.
*/

// ---------- Galaxy Background Utilities ----------
const StarsBG: React.FC = () => (
  <div aria-hidden className="fixed inset-0 -z-10 bg-black">
    {/* Layered star fields using gradients & radial spots */}
    <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_top,rgba(18,16,60,0.8),rgba(0,0,0,1))]" />
    <div className="pointer-events-none absolute inset-0 opacity-60 [background:radial-gradient(2px_2px_at_20px_30px,white_50%,transparent_60%),radial-gradient(1px_1px_at_120px_80px,white_60%,transparent_60%),radial-gradient(1px_1px_at_200px_150px,white_60%,transparent_60%),radial-gradient(2px_2px_at_320px_220px,white_50%,transparent_60%),radial-gradient(1px_1px_at_520px_40px,white_60%,transparent_60%)] bg-[length:600px_600px] animate-[scrollstars_60s_linear_infinite]" />
    <div className="pointer-events-none absolute inset-0 opacity-40 [background:radial-gradient(2px_2px_at_40px_90px,white_50%,transparent_60%),radial-gradient(1px_1px_at_240px_140px,white_60%,transparent_60%),radial-gradient(1px_1px_at_440px_190px,white_60%,transparent_60%),radial-gradient(2px_2px_at_640px_20px,white_50%,transparent_60%)] bg-[length:800px_800px] animate-[scrollstars_90s_linear_infinite]" />
    <style>{`@keyframes scrollstars { from { background-position: 0 0;} to { background-position: -1000px 1000px;} }`}</style>
  </div>
);

// ---------- Utilities & Mock Data ----------
const sampleArticles = [
  {
    id: 1,
    title: "‡∏û‡∏•‡∏±‡∏á‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏∑‡πà‡∏≠: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏à",
    cover: "https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?q=80&w=1600&auto=format&fit=crop",
    excerpt: "‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏à‡∏ï‡∏ô‡∏≤‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏¥‡∏á‡∏î‡∏≤‡∏ß‡∏ï‡∏Å‚Äî‡∏´‡∏≤‡∏Å‡πÉ‡∏à‡∏ô‡∏¥‡πà‡∏á‡∏û‡∏≠‡∏Å‡πá‡∏à‡∏∞‡πÑ‡∏õ‡∏ñ‡∏∂‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",
  },
  {
    id: 2,
    title: "‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ö‡∏û‡∏•‡∏±‡∏á‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏¢‡πÉ‡∏à 3 ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞",
    cover: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1600&auto=format&fit=crop",
    excerpt: "‡∏ù‡∏∂‡∏Å‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏ó‡∏∏‡∏Å‡πÄ‡∏ä‡πâ‡∏≤ ‡πÄ‡∏ï‡∏¥‡∏°‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏•‡∏°‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏™‡∏ï‡∏¥",
  },
  {
    id: 3,
    title: "‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏±‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏ä‡∏≤‡∏°‡∏ó‡∏¥‡πÄ‡∏ö‡∏ï‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏∞‡∏Å‡∏î‡∏à‡∏¥‡∏ï‡πÄ‡∏ö‡∏≤ ‡πÜ",
    cover: "https://images.unsplash.com/photo-1526726538690-5cbf956ae2fd?q=80&w=1600&auto=format&fit=crop",
    excerpt: "‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏¢‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ù‡∏∏‡πà‡∏ô‡∏•‡∏∞‡∏≠‡∏≠‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®",
  },
];

const sampleAffiliates = [
  { id: 1, name: "Mystic Deck Pro", url: "#", img: "https://images.unsplash.com/photo-1543946602-a0fce8117698?q=80&w=1200&auto=format&fit=crop" },
  { id: 2, name: "Lucky Charm+", url: "#", img: "https://images.unsplash.com/photo-1610375229650-9971f28f0b0f?q=80&w=1200&auto=format&fit=crop" },
  { id: 3, name: "Zodiac Guide App", url: "#", img: "https://images.unsplash.com/photo-1506744038136-46273834b3fb?q=80&w=1200&auto=format&fit=crop" },
];

const sampleProducts = [
  { id: 1, name: "‡∏™‡∏£‡πâ‡∏≠‡∏¢‡∏´‡∏¥‡∏ô‡∏ô‡∏≥‡πÇ‡∏ä‡∏Ñ ‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏• 7 ‡∏™‡∏µ", price: "1,290‡∏ø", img: "https://images.unsplash.com/photo-1515562141207-7a88fb7cd47f?q=80&w=1200&auto=format&fit=crop", contact: "LINE: @mystic" },
  { id: 2, name: "‡∏Å‡∏≥‡πÑ‡∏•‡πÑ‡∏ó‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏≠‡∏≤‡∏¢ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå", price: "890‡∏ø", img: "https://images.unsplash.com/photo-1599643476532-004b3b4162fd?q=80&w=1200&auto=format&fit=crop", contact: "FB: mystic.galaxy" },
  { id: 3, name: "‡∏ú‡πâ‡∏≤‡∏¢‡∏±‡∏ô‡∏ï‡πå‡∏î‡∏ß‡∏á‡∏î‡∏≤‡∏ß ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå", price: "590‡∏ø", img: "https://images.unsplash.com/photo-1612198182432-50e0bd5d80fd?q=80&w=1200&auto=format&fit=crop", contact: "Tel: 08x-xxx-xxxx" },
];

// Generate 100 fortune slips across categories using templates (unique per session)
const buildFortunes = () => {
  const categories = [
    { key: "work", label: "‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô", icon: <Briefcase className="inline h-4 w-4" /> },
    { key: "love", label: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å", icon: <Heart className="inline h-4 w-4" /> },
    { key: "luck", label: "‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏†", icon: <Coins className="inline h-4 w-4" /> },
  ] as const;

  const basePhrases = {
    work: [
      "‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÉ‡∏´‡∏°‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ ‡∏à‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°",
      "‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô",
      "‡∏≠‡∏¢‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß‡∏Ñ‡∏≥‡∏ß‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡πå ‡∏°‡∏±‡∏ô‡∏ú‡∏•‡∏±‡∏Å‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÇ‡∏ï",
      "‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏•‡πâ‡∏ô ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠",
      "‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡πÉ‡∏´‡∏°‡πà‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç",
      "‡πÄ‡∏à‡∏£‡∏à‡∏≤‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏°‡∏µ‡∏•‡∏∏‡πâ‡∏ô ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ñ‡πâ‡∏≤‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤",
      "‡∏≠‡∏¢‡πà‡∏≤‡∏ú‡∏±‡∏î‡∏ß‡∏±‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‚Äî‡∏ó‡∏≥‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏à‡∏∞‡πÄ‡∏™‡∏£‡πá‡∏à‡πÄ‡∏£‡πá‡∏ß",
      "‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏°‡∏ï‡∏ï‡∏≤‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏á‡∏°‡∏∑‡∏≠‡∏Å‡πà‡∏≠‡∏ô",
      "‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏á‡∏≤‡∏ô‡∏≠‡∏î‡∏¥‡πÄ‡∏£‡∏Å",
      "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏∞‡∏ï‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà",
    ],
    love: [
      "‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏ï‡∏£‡∏á ‡πÜ ‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏î‡πÄ‡∏î‡∏≤ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏à‡∏∞‡∏ä‡∏±‡∏î‡∏Ç‡∏∂‡πâ‡∏ô",
      "‡∏Ñ‡∏ô‡πÇ‡∏™‡∏î‡∏°‡∏µ‡∏Ñ‡∏ô‡πÅ‡∏≠‡∏ö‡∏°‡∏≠‡∏á‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô/‡∏™‡∏±‡∏á‡∏Ñ‡∏°",
      "‡∏≠‡∏î‡∏µ‡∏ï‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏≤‡∏á‡∏Ñ‡∏≤ ‡∏Ñ‡∏ß‡∏£‡∏û‡∏π‡∏î‡∏à‡∏≤‡∏Å‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•",
      "‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô",
      "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏≠‡∏°‡∏ü‡∏±‡∏á",
      "‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡∏à‡∏∞‡∏û‡∏≤‡πÉ‡∏´‡πâ‡∏û‡∏ö‡∏Ñ‡∏ô‡∏ñ‡∏π‡∏Å‡πÉ‡∏à",
      "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏≥‡∏™‡∏¥‡πà‡∏á‡πÄ‡∏•‡πá‡∏Å ‡πÜ",
      "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏ï‡∏¢‡πå‡∏Ñ‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏Ñ‡∏π‡πà‡∏Ñ‡∏ß‡∏£",
      "‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏á ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å‡∏à‡∏∞‡πÄ‡∏ö‡∏≤‡∏™‡∏ö‡∏≤‡∏¢",
      "‡∏Ñ‡∏ô‡∏£‡∏±‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á",
    ],
    luck: [
      "‡∏î‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏¢‡∏±‡∏ö‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏¢‡∏±‡∏ô",
      "‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÇ‡∏ä‡∏Ñ‡πÄ‡∏•‡πá‡∏Å ‡πÜ ‡∏û‡∏≠‡∏™‡∏ô‡∏∏‡∏Å ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô‡∏ï‡∏±‡∏ß",
      "‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô/‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡πÉ‡∏´‡πâ‡πÇ‡∏ä‡∏Ñ",
      "‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏á‡∏¥‡∏ô",
      "‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô",
      "‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏ã‡πâ‡∏≥ ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏û‡∏•‡∏≤‡∏î",
      "‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏ß‡∏±‡∏á‡∏ú‡∏•‡πÄ‡∏£‡πá‡∏ß",
      "‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡πà‡∏≤",
      "‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏à‡∏≤‡∏Å‡πÇ‡∏•‡∏Å‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ",
      "‡∏≠‡∏¢‡πà‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‚Äî‡∏Ñ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏à‡πà‡∏≤‡∏¢",
    ],
  } as const;

  // combine templates to get 100 slips
  const slips: { id: number; category: "work"|"love"|"luck"; text: string; weight: number }[] = [];
  let id = 1;
  for (let c of ["work","love","luck"] as const) {
    for (let i = 0; i < 34; i++) {
      const base = basePhrases[c][i % basePhrases[c].length];
      const flavor = [
        "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏•‡∏á‡∏°‡∏∑‡∏≠‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ú‡∏•",
        "‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏î‡∏ó‡∏ô",
        "‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏à‡∏∞‡∏Ç‡∏¢‡∏±‡∏ö",
        "‡πÇ‡∏ä‡∏Ñ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏ß‡∏¥‡∏ô‡∏±‡∏¢‡∏ã‡πâ‡∏≥ ‡πÜ",
        "‡∏≠‡∏¢‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà",
        "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ç‡∏≠‡∏á‡∏ï‡∏ô",
      ][i % 6];
      // weight determines chance to appear as "‡πÅ‡∏°‡πà‡∏ô" (mock accuracy)
      const weight = (i % 5) + 1; // 1..5
      slips.push({ id: id++, category: c, text: `${base} ‚Äî ${flavor}`, weight });
    }
  }
  // trim to exactly 100
  return slips.slice(0, 100);
};

const FORTUNES = buildFortunes();

// ---------- Simple Audio (WebAudio API chime) ----------
function useChime() {
  const ctxRef = useRef<AudioContext | null>(null);
  const ensure = () => {
    if (!ctxRef.current) ctxRef.current = new (window.AudioContext || (window as any).webkitAudioContext)();
    return ctxRef.current!;
  };
  const play = (type: "tap" | "drop" | "reveal") => {
    const ctx = ensure();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.type = "sine";
    if (type === "tap") o.frequency.value = 660;
    if (type === "drop") o.frequency.value = 440;
    if (type === "reveal") o.frequency.value = 880;
    g.gain.value = 0.001;
    o.connect(g); g.connect(ctx.destination);
    o.start();
    const t0 = ctx.currentTime;
    g.gain.exponentialRampToValueAtTime(0.2, t0 + 0.02);
    g.gain.exponentialRampToValueAtTime(0.00001, t0 + 0.25);
    o.stop(t0 + 0.27);
  };
  return { play };
}

// ---------- Components ----------
const SectionTitle: React.FC<{ icon?: React.ReactNode; title: string; subtitle?: string }>
= ({ icon, title, subtitle }) => (
  <div className="mb-6 flex items-end justify-between">
    <div>
      <h2 className="text-2xl md:text-3xl font-bold text-white flex items-center gap-2">
        {icon} {title}
      </h2>
      {subtitle && (
        <p className="text-sm text-white/70 mt-1">{subtitle}</p>
      )}
    </div>
    <Badge className="bg-indigo-600/60 backdrop-blur border border-white/10">Mystic Galaxy</Badge>
  </div>
);

// Articles Grid
const Articles: React.FC = () => (
  <div className="grid md:grid-cols-3 gap-6">
    {sampleArticles.map((a) => (
      <Card key={a.id} className="bg-white/5 border-white/10 backdrop-blur hover:bg-white/10 transition">
        <CardHeader className="p-0">
          <div className="relative">
            <img src={a.cover} alt={a.title} className="h-44 w-full object-cover rounded-t-2xl" />
            <div className="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent rounded-t-2xl" />
            <CardTitle className="absolute bottom-3 left-4 text-white text-lg drop-shadow">{a.title}</CardTitle>
          </div>
        </CardHeader>
        <CardContent className="p-4 text-white/80 text-sm">{a.excerpt}</CardContent>
      </Card>
    ))}
  </div>
);

// Community Chat (client side)
const ChatBox: React.FC = () => {
  const [messages, setMessages] = useState<{ id:number; text:string; img?:string }[]>([
    { id: 1, text: "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ä‡∏≤‡∏ß‡∏Å‡∏≤‡πÅ‡∏•‡πá‡∏Ñ‡∏ã‡∏µ‡πà ‚ú® ‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏®‡∏£‡∏±‡∏ó‡∏ò‡∏≤‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà" },
  ]);
  const [text, setText] = useState("");
  const [img, setImg] = useState<string | undefined>(undefined);

  const addMessage = () => {
    if (!text && !img) return;
    setMessages((m) => [...m, { id: Date.now(), text, img }]);
    setText("");
    setImg(undefined);
  };

  return (
    <Card className="bg-white/5 border-white/10 backdrop-blur">
      <CardHeader>
        <CardTitle className="text-white flex items-center gap-2"><MessageSquare className="h-5 w-5"/> ‡∏ä‡πà‡∏≠‡∏á‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢‡∏ä‡∏∏‡∏°‡∏ä‡∏ô</CardTitle>
      </CardHeader>
      <CardContent className="space-y-3">
        <div className="h-64 overflow-y-auto space-y-3 pr-2">
          {messages.map((m) => (
            <div key={m.id} className="p-3 rounded-xl bg-white/5 border border-white/10 text-white/90">
              <p className="whitespace-pre-wrap text-sm">{m.text}</p>
              {m.img && (
                <img src={m.img} alt="upload" className="mt-2 max-h-48 rounded-lg" />
              )}
            </div>
          ))}
        </div>
        <div className="flex items-center gap-2">
          <Input
            value={text}
            onChange={(e) => setText(e.target.value)}
            placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..."
            className="bg-white/10 border-white/20 text-white placeholder:text-white/40"
          />
          <label className="cursor-pointer inline-flex items-center gap-2 text-white/80 text-sm px-3 py-2 rounded-xl bg-white/10 border border-white/20 hover:bg-white/20">
            <Upload className="h-4 w-4"/>
            ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
            <input type="file" accept="image/*" className="hidden" onChange={(e)=>{
              const f = e.target.files?.[0];
              if (!f) return; const url = URL.createObjectURL(f); setImg(url);
            }}/>
          </label>
          <Button onClick={addMessage} className="bg-indigo-600 hover:bg-indigo-500">
            <Send className="h-4 w-4 mr-1"/> ‡∏™‡πà‡∏á
          </Button>
        </div>
        {img && (
          <div className="text-white/80 text-xs">‡∏£‡∏π‡∏õ‡∏ñ‡∏π‡∏Å‡πÅ‡∏ô‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß</div>
        )}
      </CardContent>
    </Card>
  );
};

// ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå
const FortuneSticks: React.FC = () => {
  const [category, setCategory] = useState<"work"|"love"|"luck">("work");
  const [tapCount, setTapCount] = useState(0);
  const [result, setResult] = useState<{ id:number; text:string } | null>(null);
  const [shaking, setShaking] = useState(false);
  const [muted, setMuted] = useState(false);
  const { play } = useChime();

  const pool = useMemo(() => FORTUNES.filter(f => f.category === category), [category]);

  // Weighted random to simulate "‡πÅ‡∏°‡πà‡∏ô" feel
  const pickWeighted = () => {
    const sum = pool.reduce((s,p)=>s+p.weight,0);
    let r = Math.random()*sum;
    for (let p of pool) { r -= p.weight; if (r <= 0) return p; }
    return pool[0];
  };

  const onTap = () => {
    if (!muted) play("tap");
    setShaking(true);
    setTimeout(()=> setShaking(false), 180);
    setTapCount((c)=>{
      const next = c+1;
      if (next >= 5) {
        if (!muted) play("drop");
        const pick = pickWeighted();
        setTimeout(()=>{ if(!muted) play("reveal"); setResult({ id: pick.id, text: pick.text }); }, 300);
        return 0; // reset taps after drop
      }
      return next;
    });
  };

  return (
    <Card className="bg-white/5 border-white/10 backdrop-blur overflow-hidden">
      <CardHeader className="flex-row items-center justify-between">
        <CardTitle className="text-white flex items-center gap-2"><Sparkles className="h-5 w-5"/> ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</CardTitle>
        <div className="flex items-center gap-3">
          <Select value={category} onValueChange={(v)=>setCategory(v as any)}>
            <SelectTrigger className="w-40 bg-white/10 border-white/20 text-white">
              <SelectValue placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢" />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="work">‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô</SelectItem>
              <SelectItem value="love">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å</SelectItem>
              <SelectItem value="luck">‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏†</SelectItem>
            </SelectContent>
          </Select>
          <div className="flex items-center gap-2 text-white/80 text-sm">
            <Volume2 className="h-4 w-4" /> ‡πÄ‡∏™‡∏µ‡∏¢‡∏á
            <Switch checked={!muted} onCheckedChange={(v)=>setMuted(!v)} />
          </div>
        </div>
      </CardHeader>
      <CardContent>
        <div className="grid md:grid-cols-2 gap-6 items-center">
          <div className="relative h-72 md:h-80 flex items-center justify-center">
            {/* Stick box */}
            <motion.div
              animate={shaking ? { rotate: [0, -2, 2, -1, 1, 0] } : {}}
              transition={{ duration: 0.18 }}
              className="relative w-48 h-56 bg-gradient-to-b from-amber-300 to-amber-600 rounded-2xl shadow-xl border border-amber-200/50"
            >
              <div className="absolute inset-x-3 top-3 bottom-3 rounded-xl bg-amber-100/40"/>
              <div className="absolute -top-4 left-1/2 -translate-x-1/2 bg-rose-600 text-white text-xs px-3 py-1 rounded-full shadow">
                ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ
              </div>
              {/* sticks peeking */}
              <div className="absolute top-6 inset-x-10 flex justify-center gap-1">
                {Array.from({ length: 14 }).map((_,i)=>(
                  <div key={i} className="w-2 h-14 bg-red-700/80 rounded-full"/>
                ))}
              </div>
            </motion.div>
            {/* Drop area */}
            <AnimatePresence>
              {result && (
                <motion.div
                  initial={{ opacity: 0, y: -20 }}
                  animate={{ opacity: 1, y: 0 }}
                  exit={{ opacity: 0 }}
                  className="absolute bottom-0 translate-y-10"
                >
                  <div className="w-28 h-28 rounded-xl bg-red-700/90 border border-white/20 flex items-center justify-center text-white font-bold shadow-xl">
                    ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà {result.id}
                  </div>
                </motion.div>
              )}
            </AnimatePresence>
          </div>
          <div className="space-y-4">
            <p className="text-white/80 text-sm">‡πÅ‡∏ï‡∏∞‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏Ç‡∏¢‡πà‡∏≤" ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÑ‡∏°‡πâ‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ‡∏à‡∏∞‡∏´‡∏•‡πà‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∂‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</p>
            <Button onClick={onTap} className="bg-fuchsia-600 hover:bg-fuchsia-500">
              <Stars className="h-4 w-4 mr-1"/> ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏≤‡∏¢ (‡πÅ‡∏ï‡∏∞ {Math.max(0,5 - tapCount)}/5)
            </Button>
            <Separator className="bg-white/10"/>
            <div className="p-4 rounded-xl bg-white/5 border border-white/10 min-h-[96px] text-white">
              {result ? (
                <div>
                  <div className="text-sm mb-1 text-white/70">‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢:</div>
                  <div className="font-medium leading-relaxed">{result.text}</div>
                </div>
              ) : (
                <div className="text-white/60 text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢ ‚Äî ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</div>
              )}
            </div>
          </div>
        </div>
      </CardContent>
    </Card>
  );
};

// AI ‡∏î‡∏π‡∏î‡∏ß‡∏á (local demo)
const AIDuDuang: React.FC = () => {
  const [birth, setBirth] = useState("");
  const [gender, setGender] = useState("‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏");
  const [age, setAge] = useState("");
  const [question, setQuestion] = useState("");
  const [answer, setAnswer] = useState<string | null>(null);

  const generate = () => {
    // Simple rule-based reading using birth month & weekday
    try {
      const d = birth ? new Date(birth) : new Date();
      const month = d.getMonth()+1;
      const weekday = d.getDay();
      const tone = [
        "‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡∏ô‡∏±‡∏¢‡πÄ‡∏•‡πá‡∏Å ‡πÜ ‡∏à‡∏∞‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏ç‡πà",
        "‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Å‡πà‡∏≠‡∏ô ‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏î‡∏π‡∏î‡∏™‡∏¥‡πà‡∏á‡∏î‡∏µ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤",
        "‡∏≠‡∏¢‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ú‡∏ô ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏°‡πà‡πÑ‡∏Å‡∏•",
        "‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Ñ‡∏≥‡∏û‡∏π‡∏î ‡πÅ‡∏ï‡πà‡∏Å‡∏•‡πâ‡∏≤‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£",
        "‡∏°‡∏µ‡∏Ç‡πà‡∏≤‡∏ß‡∏î‡∏µ‡∏ú‡πà‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß",
        "‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏à‡∏≤‡∏Å‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤",
        "‡πÉ‡∏à‡∏ô‡∏¥‡πà‡∏á ‡πÜ ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à",
      ][weekday];
      const field = /‡∏á‡∏≤‡∏ô|‡∏á‡∏≤‡∏ô|‡∏≠‡∏≤‡∏ä‡∏µ‡∏û|‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå|‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à/.test(question) ? "‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô" : /‡∏£‡∏±‡∏Å|‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å|‡πÅ‡∏ü‡∏ô|‡∏Ñ‡∏π‡πà|‡∏Ñ‡∏ô‡∏Ñ‡∏∏‡∏¢/.test(question) ? "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å" : "‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏†/‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô";
      const signHint = month % 3 === 0 ? "‡∏ä‡πà‡∏ß‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏û‡∏•‡∏±‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏î‡πà‡∏ô" : month % 3 === 1 ? "‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà" : "‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏°‡∏µ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Ç‡∏¢‡∏±‡∏ö";
      const g = gender;
      const a = parseInt(age||"0",10);
      const ageNote = a>0 ? (a<25? "‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö" : a<40? "‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏à‡∏∞‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à": a<60? "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏¥‡πà‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏∏‡∏ç‡πÅ‡∏à": "‡πÉ‡∏™‡πà‡πÉ‡∏à‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏∞‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏î‡∏ß‡∏á") : "‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏û‡∏•‡∏±‡∏á‡πÑ‡∏´‡∏•‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß";
      setAnswer(`${field}: ${tone}. ${signHint}. ${ageNote}.`);
    } catch {
      setAnswer("‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á");
    }
  };

  return (
    <Card className="bg-white/5 border-white/10 backdrop-blur">
      <CardHeader>
        <CardTitle className="text-white flex items-center gap-2"><Sparkles className="h-5 w-5"/> AI ‡∏î‡∏π‡∏î‡∏ß‡∏á (‡πÄ‡∏î‡πÇ‡∏°‡πà‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏ß‡πá‡∏ö)</CardTitle>
      </CardHeader>
      <CardContent className="space-y-3">
        <div className="grid md:grid-cols-4 gap-3">
          <div className="space-y-2">
            <div className="text-white/80 text-sm">‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</div>
            <Input type="date" value={birth} onChange={(e)=>setBirth(e.target.value)} className="bg-white/10 border-white/20 text-white"/>
          </div>
          <div className="space-y-2">
            <div className="text-white/80 text-sm">‡πÄ‡∏û‡∏®</div>
            <Select value={gender} onValueChange={setGender}>
              <SelectTrigger className="bg-white/10 border-white/20 text-white">
                <SelectValue placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏®"/>
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="‡∏ä‡∏≤‡∏¢">‡∏ä‡∏≤‡∏¢</SelectItem>
                <SelectItem value="‡∏´‡∏ç‡∏¥‡∏á">‡∏´‡∏ç‡∏¥‡∏á</SelectItem>
                <SelectItem value="‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏">‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏</SelectItem>
              </SelectContent>
      
